CMAKE_MINIMUM_REQUIRED (VERSION 3.8)

PROJECT (libevp C CXX)
ENABLE_TESTING()

IF(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
	SET(CMAKE_CXX_STANDARD 20)
	SET(CMAKE_CXX_FLAGS "-m32 -ldl -lpthread -lstdc++fs -Wall -fpic -O2")
ELSEIF(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
	SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /std:c++20 /D \"WIN32\" /EHsc /GL-")
	
	IF (CMAKE_BUILD_TYPE STREQUAL "Debug")
		SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /Od /Zi")
	ELSE()
		SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /O2")
	ENDIF()
ENDIF()

SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/bin/${CMAKE_BUILD_TYPE}")
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/bin/${CMAKE_BUILD_TYPE}")
SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_SOURCE_DIR}/bin/${CMAKE_BUILD_TYPE}")

ADD_SUBDIRECTORY("src")
ADD_SUBDIRECTORY("test")
