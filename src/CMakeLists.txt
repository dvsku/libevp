CMAKE_MINIMUM_REQUIRED (VERSION 3.8)

PROJECT ("evp" C CXX)

SET(APP_ICON_RESOURCE_WINDOWS "appicon.rc")

IF(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
	SET(CMAKE_CXX_FLAGS "-std=c++11 -m32 -ldl -lpthread -Wall -fpic -O2")
ELSEIF(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
	SET(CMAKE_CXX_FLAGS "/std:c++14 /D \"WIN32\" /O2 /Zi")
ENDIF()

IF(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
	ADD_EXECUTABLE(${PROJECT_NAME} "evp.cpp" "libs/md5/md5.cpp")
ELSEIF(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
	ADD_EXECUTABLE(${PROJECT_NAME} "evp.cpp" "libs/md5/md5.cpp" ${APP_ICON_RESOURCE_WINDOWS})
ENDIF()

TARGET_INCLUDE_DIRECTORIES(${PROJECT_NAME} PRIVATE "libs/md5")

SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES LINKER_LANGUAGE CXX)
SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES LINK_FLAGS "/PROFILE")