FILE(GLOB_RECURSE BUILD_FILE_LIST CONFIGURE_DEPENDS 
    "*.cpp"
)

ADD_LIBRARY(libevp STATIC ${BUILD_FILE_LIST})

TARGET_INCLUDE_DIRECTORIES(libevp PRIVATE "${EVP_HEADERS}")

IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
	SET_TARGET_PROPERTIES(libevp PROPERTIES OUTPUT_NAME "libevp_d")
ELSEIF(CMAKE_BUILD_TYPE STREQUAL "Release")
	SET_TARGET_PROPERTIES(libevp PROPERTIES OUTPUT_NAME "libevp")
ENDIF()

SET_TARGET_PROPERTIES(libevp PROPERTIES LINKER_LANGUAGE CXX)

IF(UNIX AND CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
    SET_TARGET_PROPERTIES(libevp PROPERTIES PREFIX "")
ELSEIF(MSVC)
    IF(CMAKE_BUILD_TYPE STREQUAL "Debug")
		TARGET_LINK_OPTIONS(libevp PRIVATE "/LTCG- /DEBUG")
    ELSEIF(CMAKE_BUILD_TYPE STREQUAL "Release")
        TARGET_LINK_OPTIONS(libevp PRIVATE "/LTCG-")
    ENDIF()
ENDIF()