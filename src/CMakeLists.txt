CMAKE_MINIMUM_REQUIRED (VERSION 3.8)

PROJECT ("libevp" C CXX)

IF(CMAKE_CXX_COMPILER_ID STREQUAL "GNU")
	SET(CMAKE_CXX_FLAGS "-std=c++17 -m32 -ldl -lpthread -lstdc++fs -Wall -fpic -O2")
ELSEIF(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
	SET(CMAKE_CXX_FLAGS "/std:c++17 /D \"WIN32\" /O2 /Zi /EHsc")
ENDIF()

ADD_LIBRARY(${PROJECT_NAME} STATIC  "libevp.h" "libevp.cpp" "lib/md5/md5.cpp" "definitions.h")

TARGET_INCLUDE_DIRECTORIES(${PROJECT_NAME} PRIVATE "lib/md5")

SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES LINKER_LANGUAGE CXX)
SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES LINK_FLAGS "/PROFILE")